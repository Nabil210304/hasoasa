{% extends "base.html" %}

{% block content %}
<body>

{% include "navbar.html" %}

<section class="py-1">
    <div class="row mt-5">
        <div class="col-lg-8 offset-lg-2 ">
            <h3>Tambah Pegawai</h3>
            <hr>
            <form class="form" method="post" action="/addprsn_submit">
                <div class="form-group row">
                    <label for="txtnbr" class="col-sm-2 col-form-label">ID Karyawan</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="txtnbr" name="txtnbr" value={{ newnbr }} readonly>
                    </div>
                </div>
                  <div class="form-group row">
                    <label for="user_id" class="col-sm-2 col-form-label">Pilih Karyawan</label>
                    <div class="col-sm-8">
                        <select class="form-control" id="user_id" name="user_id" required>
                            <option value="">-- Pilih Karyawan --</option>
                            {% for k in karyawan_baru %}
                                <option value="{{ k[0] }}" data-username="{{ k[1] }}" data-email="{{ k[2] }}">{{ k[1] }} ({{ k[2] }})</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="txtname" class="col-sm-2 col-form-label">Name</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="txtname" name="txtname" required>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="optskill" class="col-sm-2 col-form-label">Skill</label>
                    <div class="col-sm-4">
                        <select class="form-control" name="optskill" id="optskill">
                            <option value="SOFTWARE">Software</option>
                            <option value="HARDWARE">Hardware</option>
                            <option value="ELECTRICAL">Electrical</option>
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label"></label>
                    <div class="col-sm-8">
                        <input type="submit" class="btn btn-primary btn-lg" value="Next">
                        <a href="/" type="button" class="btn btn-warning btn-lg"><b>Back</b></a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var userSelect = document.getElementById('user_id');
    var nameInput = document.getElementById('txtname');
    userSelect.addEventListener('change', function() {
        var selected = userSelect.options[userSelect.selectedIndex];
        // Ganti ke data-username atau data-email sesuai kebutuhan
        nameInput.value = selected.getAttribute('data-username') || '';
    });
});
</script>

</body>
{% endblock %}